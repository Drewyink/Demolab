<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Facets ‚Äî Claims</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    #overlay {
      position: fixed !important; inset: 0 !important;
      background: rgba(0,0,0,0.75) !important; z-index: 99999 !important;
      display: none; align-items: center; justify-content: center;
    }
    #overlay.open { display: flex !important; }
    .sidebar { z-index: 50 !important; }
    .topbar  { z-index: 40 !important; }
    #adj-panel {
      background: var(--surface2); border: 1px solid var(--border2);
      border-radius: 8px; padding: 16px; margin-top: 12px;
    }
    #adj-panel h4 {
      font-size: 11px; font-family: 'IBM Plex Mono', monospace;
      text-transform: uppercase; letter-spacing: 1.5px; color: var(--accent); margin-bottom: 10px;
    }
    .adj-row {
      display: flex; justify-content: space-between; align-items: center;
      padding: 5px 0; border-bottom: 1px solid rgba(30,45,69,0.5); font-size: 12px;
    }
    .adj-row:last-child { border-bottom: none; }
    .adj-label { color: var(--text2); }
    .adj-value { font-family: 'IBM Plex Mono', monospace; font-weight: 600; color: var(--text); }
    .adj-value.green  { color: var(--green); }
    .adj-value.red    { color: var(--red); }
    .adj-value.yellow { color: var(--yellow); }
    .adj-value.cyan   { color: var(--accent); }
    .rule-tag {
      display: inline-flex; align-items: center; gap: 4px;
      background: rgba(0,212,255,0.08); border: 1px solid rgba(0,212,255,0.2);
      border-radius: 4px; padding: 2px 7px; font-size: 10px;
      font-family: 'IBM Plex Mono', monospace; color: var(--accent); margin: 2px;
    }
    .rule-tag.warn { background: rgba(255,215,0,0.08); border-color: rgba(255,215,0,0.25); color: var(--yellow); }
    .rule-tag.deny { background: rgba(255,71,87,0.08); border-color: rgba(255,71,87,0.25); color: var(--red); }
    .claims-summary {
      display: grid; grid-template-columns: repeat(4, 1fr); gap: 14px; margin-bottom: 20px;
    }
    .summary-card {
      background: var(--surface); border: 1px solid var(--border);
      border-radius: 8px; padding: 16px; text-align: center;
    }
    .summary-card .s-val { font-size: 24px; font-weight: 700; font-family: 'IBM Plex Mono', monospace; margin: 4px 0; }
    .summary-card .s-lbl { font-size: 10px; color: var(--text3); text-transform: uppercase; letter-spacing: 1.5px; }
  </style>
</head>
<body>
<div class="app-layout">
  <aside class="sidebar">
    <div class="sidebar-logo"><div class="logo-icon">FX</div><div><div class="logo-text">FACETS</div><div class="logo-sub">Config Suite</div></div></div>
    <nav class="sidebar-nav">
      <div class="nav-section-label">Overview</div>
      <a class="nav-item" href="index.html"><span class="nav-icon">‚óà</span> Dashboard</a>
      <div class="nav-section-label">Configuration</div>
      <a class="nav-item" href="members.html"><span class="nav-icon">üë§</span> Members</a>
      <a class="nav-item" href="products.html"><span class="nav-icon">üì¶</span> Products</a>
      <a class="nav-item" href="plans.html"><span class="nav-icon">üìã</span> Plans</a>
      <a class="nav-item" href="benefits.html"><span class="nav-icon">‚úö</span> Benefits</a>
      <a class="nav-item" href="pricing.html"><span class="nav-icon">üí≤</span> Pricing</a>
      <div class="nav-section-label">Operations</div>
      <a class="nav-item active" href="claims.html"><span class="nav-icon">üìÑ</span> Claims</a>
      <a class="nav-item" href="audit.html"><span class="nav-icon">üîç</span> Audit Log</a>
    </nav>
    <div class="sidebar-footer"><div class="env-badge">Sandbox ¬∑ v1.0</div></div>
  </aside>

  <main class="main-content">
    <div class="topbar">
      <div class="topbar-left"><span class="topbar-breadcrumb">Operations ‚Üí <span>Claims</span></span></div>
      <div class="topbar-right"><span class="topbar-clock" id="clock"></span></div>
    </div>
    <div class="page-content">
      <div class="page-header">
        <div><div class="page-title">Claims Processing</div><div class="page-subtitle">ADJUDICATE ¬∑ REVIEW ¬∑ CLOSE</div></div>
        <button class="btn btn-primary" id="new-btn">+ New Claim</button>
      </div>

      <div class="claims-summary">
        <div class="summary-card">
          <div class="s-lbl">Total Claims</div>
          <div class="s-val" id="s-total">‚Äî</div>
        </div>
        <div class="summary-card">
          <div class="s-lbl">Total Billed</div>
          <div class="s-val" style="font-size:18px" id="s-billed">‚Äî</div>
        </div>
        <div class="summary-card">
          <div class="s-lbl">Total Paid</div>
          <div class="s-val" style="font-size:18px;color:var(--green)" id="s-paid">‚Äî</div>
        </div>
        <div class="summary-card">
          <div class="s-lbl">Pending Review</div>
          <div class="s-val" style="color:var(--yellow)" id="s-pending">‚Äî</div>
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <span class="card-title">üìÑ Claims <span class="count-label" id="count"></span></span>
          <div style="display:flex;gap:10px;align-items:center">
            <div class="search-bar" style="margin:0;width:200px">
              <span class="search-icon">üîé</span>
              <input type="text" placeholder="Search claims..." id="search-input">
            </div>
            <div class="filter-tabs">
              <button class="filter-tab active" id="tab-all">All</button>
              <button class="filter-tab" id="tab-paid">Paid</button>
              <button class="filter-tab" id="tab-pending">Pending</button>
              <button class="filter-tab" id="tab-review">In Review</button>
              <button class="filter-tab" id="tab-denied">Denied</button>
            </div>
          </div>
        </div>
        <div class="table-wrapper">
          <table>
            <thead><tr>
              <th>Claim #</th><th>Member</th><th>Provider</th>
              <th>Diag / Proc</th><th>Service Date</th>
              <th>Billed</th><th>Allowed</th><th>Paid</th>
              <th>Status</th><th>Actions</th>
            </tr></thead>
            <tbody id="tbody">
              <tr><td colspan="10"><div class="empty-state"><div class="empty-icon">‚è≥</div><p>Loading...</p></div></td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </main>
</div>

<!-- MODAL -->
<div id="overlay">
  <div class="modal" style="width:700px;max-height:92vh;overflow-y:auto">
    <div class="modal-header">
      <span class="modal-title" id="modal-title">New Claim</span>
      <button class="modal-close" id="btn-x">‚úï</button>
    </div>
    <div class="modal-body">
      <div id="form-error" style="display:none;background:rgba(255,71,87,0.12);border:1px solid rgba(255,71,87,0.4);border-radius:6px;padding:10px 14px;margin-bottom:14px;color:#ff4757;font-size:12px"></div>
      <form class="form-grid" onsubmit="return false">
        <input type="hidden" id="f-id">

        <div class="form-group">
          <label class="form-label">Claim Number *</label>
          <input type="text" class="form-input" id="f-claim_number" placeholder="CLM-2025-001">
        </div>
        <div class="form-group">
          <label class="form-label">Provider</label>
          <input type="text" class="form-input" id="f-provider" placeholder="City Medical Center">
        </div>
        <div class="form-group">
          <label class="form-label">Service Date</label>
          <input type="date" class="form-input" id="f-service_date">
        </div>
        <div class="form-group">
          <label class="form-label">Claim Date</label>
          <input type="date" class="form-input" id="f-claim_date">
        </div>

        <div class="form-group full" style="border-top:1px solid var(--border);padding-top:14px;margin-top:4px">
          <label class="form-label" style="color:var(--accent);letter-spacing:2px">MEMBER &amp; PLAN</label>
        </div>
        <div class="form-group full">
          <label class="form-label">Member</label>
          <select class="form-select" id="f-member_id">
            <option value="">‚Äî Select Member ‚Äî</option>
          </select>
        </div>
        <div class="form-group full">
          <label class="form-label">Plan</label>
          <select class="form-select" id="f-plan_id">
            <option value="">‚Äî Select Plan ‚Äî</option>
          </select>
          <span id="plan-hint" style="font-size:11px;color:var(--accent);margin-top:4px;display:none">‚úì Plan auto-filled from member enrollment</span>
        </div>

        <div class="form-group full" style="border-top:1px solid var(--border);padding-top:14px;margin-top:4px">
          <label class="form-label" style="color:var(--accent);letter-spacing:2px">CLINICAL CODES</label>
        </div>
        <div class="form-group">
          <label class="form-label">Diagnosis Code (ICD-10)</label>
          <input type="text" class="form-input" id="f-diagnosis_code" placeholder="e.g. Z00.00">
        </div>
        <div class="form-group">
          <label class="form-label">Procedure Code (CPT)</label>
          <input type="text" class="form-input" id="f-procedure_code" placeholder="e.g. 99213">
        </div>
        <div class="form-group full">
          <label class="form-label">Claim Type</label>
          <select class="form-select" id="f-claim_type" onchange="runAdjudication()">
            <option value="medical_pcp">Medical ‚Äî Primary Care Visit</option>
            <option value="medical_specialist">Medical ‚Äî Specialist Visit</option>
            <option value="medical_er">Medical ‚Äî Emergency Room</option>
            <option value="medical_urgent">Medical ‚Äî Urgent Care</option>
            <option value="medical_preventive">Medical ‚Äî Preventive / Wellness</option>
            <option value="medical_surgery">Medical ‚Äî Outpatient Surgery</option>
            <option value="medical_inpatient">Medical ‚Äî Inpatient Hospital</option>
            <option value="medical_imaging">Medical ‚Äî MRI / CT / Imaging</option>
            <option value="medical_lab">Medical ‚Äî Lab / Pathology</option>
            <option value="medical_pt">Medical ‚Äî Physical Therapy</option>
            <option value="rx_generic">Pharmacy ‚Äî Generic Rx</option>
            <option value="rx_brand">Pharmacy ‚Äî Brand Rx</option>
            <option value="rx_specialty">Pharmacy ‚Äî Specialty Rx</option>
            <option value="dental_preventive">Dental ‚Äî Preventive</option>
            <option value="dental_basic">Dental ‚Äî Basic Restorative</option>
            <option value="dental_major">Dental ‚Äî Major Restorative</option>
            <option value="oon_medical">Out-of-Network ‚Äî Medical</option>
          </select>
        </div>

        <div class="form-group full" style="border-top:1px solid var(--border);padding-top:14px;margin-top:4px">
          <label class="form-label" style="color:var(--accent);letter-spacing:2px">AMOUNTS</label>
        </div>
        <div class="form-group">
          <label class="form-label">Billed Amount ($) *</label>
          <input type="number" class="form-input" id="f-billed_amount" step="0.01" min="0" placeholder="0.00" oninput="runAdjudication()">
        </div>
        <div class="form-group">
          <label class="form-label">PA On File?</label>
          <select class="form-select" id="f-pa_on_file" onchange="runAdjudication()">
            <option value="no">No</option>
            <option value="yes">Yes</option>
            <option value="na">N/A ‚Äî Not Required</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Allowed Amount ($)</label>
          <input type="number" class="form-input" id="f-allowed_amount" step="0.01" min="0" placeholder="Auto-calculated">
        </div>
        <div class="form-group">
          <label class="form-label">Paid Amount ($)</label>
          <input type="number" class="form-input" id="f-paid_amount" step="0.01" min="0" placeholder="Auto-calculated">
        </div>

        <div class="form-group full">
          <div id="adj-panel" style="display:none">
