<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Facets Sandbox â€” Login</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body class="login-page">
  <div class="login-bg"></div>
  <div class="login-card">
    <div class="login-logo">
      <div class="logo-mark">FACETS</div>
      <div class="logo-subtitle">Configuration Software</div>
    </div>
    <div id="login-error" class="alert alert-error hidden"></div>
    <div class="form-group">
      <label for="username">Username</label>
      <input type="text" id="username" placeholder="Enter username" autocomplete="username">
    </div>
    <div class="form-group">
      <label for="password">Password</label>
      <input type="password" id="password" placeholder="Enter password" autocomplete="current-password">
    </div>
    <button class="btn btn-primary" style="width:100%;margin-top:8px;padding:12px" id="btn-login">
      Sign In
    </button>
    <div style="text-align:center;margin-top:20px;font-size:11px;color:var(--gray-400);font-family:var(--font-mono)">
      Demo: admin / password
    </div>
  </div>
  <script src="/app.js"></script>
  <script>
    Auth.init();
    if (Auth.token) window.location.href = '/members';

    const loginBtn = document.getElementById('btn-login');
    const errorEl = document.getElementById('login-error');
    const usernameEl = document.getElementById('username');
    const passwordEl = document.getElementById('password');

    async function doLogin() {
      const username = usernameEl.value.trim();
      const password = passwordEl.value;
      if (!username || !password) {
        errorEl.textContent = 'Please enter username and password';
        errorEl.classList.remove('hidden');
        return;
      }
      loginBtn.textContent = 'Signing in...';
      loginBtn.disabled = true;
      try {
        await Auth.login(username, password);
        window.location.href = '/members';
      } catch (e) {
        errorEl.textContent = e.message;
        errorEl.classList.remove('hidden');
        loginBtn.textContent = 'Sign In';
        loginBtn.disabled = false;
      }
    }

    loginBtn.onclick = doLogin;
    [usernameEl, passwordEl].forEach(el => {
      el.addEventListener('keydown', e => { if (e.key === 'Enter') doLogin(); });
    });
  </script>
</body>
</html>
